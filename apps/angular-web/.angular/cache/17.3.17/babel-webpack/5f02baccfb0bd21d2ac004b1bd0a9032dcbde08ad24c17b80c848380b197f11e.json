{"ast":null,"code":"import _asyncToGenerator from \"/Users/Zen/Desktop/ApexFlow/apps/angular-web/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { EventEmitter, signal } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@angular/forms\";\nconst _c0 = [\"fileInput\"];\nfunction UploadModalComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"div\", 12);\n    i0.ɵɵlistener(\"dragover\", function UploadModalComponent_div_8_Template_div_dragover_1_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.onDragOver($event));\n    })(\"dragleave\", function UploadModalComponent_div_8_Template_div_dragleave_1_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.onDragLeave($event));\n    })(\"drop\", function UploadModalComponent_div_8_Template_div_drop_1_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.onDrop($event));\n    })(\"click\", function UploadModalComponent_div_8_Template_div_click_1_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.openFileDialog());\n    });\n    i0.ɵɵelementStart(2, \"div\", 13);\n    i0.ɵɵtext(3, \"\\uD83D\\uDCC1\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"h3\");\n    i0.ɵɵtext(5, \"Drag and drop files here\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\");\n    i0.ɵɵtext(7, \"or click to browse files\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 14)(9, \"span\", 15);\n    i0.ɵɵtext(10, \"PDF\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"span\", 15);\n    i0.ɵɵtext(12, \"DOC\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"span\", 15);\n    i0.ɵɵtext(14, \"DOCX\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"span\", 15);\n    i0.ɵɵtext(16, \"TXT\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"span\", 15);\n    i0.ɵɵtext(18, \"JPG\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"span\", 15);\n    i0.ɵɵtext(20, \"PNG\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(21, \"input\", 16, 0);\n    i0.ɵɵlistener(\"change\", function UploadModalComponent_div_8_Template_input_change_21_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.onFileSelected($event));\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵclassProp(\"drag-over\", ctx_r1.isDragOver());\n  }\n}\nfunction UploadModalComponent_div_9_div_7_span_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"\\uD83D\\uDCC4\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UploadModalComponent_div_9_div_7_span_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"\\uD83D\\uDCDD\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UploadModalComponent_div_9_div_7_span_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"\\uD83D\\uDCDD\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UploadModalComponent_div_9_div_7_span_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"\\uD83D\\uDCC4\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UploadModalComponent_div_9_div_7_span_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"\\uD83D\\uDDBC\\uFE0F\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UploadModalComponent_div_9_div_7_span_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"\\uD83D\\uDDBC\\uFE0F\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UploadModalComponent_div_9_div_7_span_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"\\uD83D\\uDDBC\\uFE0F\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UploadModalComponent_div_9_div_7_span_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"\\uD83D\\uDCCE\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UploadModalComponent_div_9_div_7_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 39);\n    i0.ɵɵelement(1, \"div\", 40);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const file_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵstyleProp(\"width\", file_r4.progress, \"%\");\n  }\n}\nfunction UploadModalComponent_div_9_div_7_span_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 41);\n    i0.ɵɵtext(1, \"\\u23F3\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UploadModalComponent_div_9_div_7_span_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 42);\n    i0.ɵɵtext(1, \"\\u26A1\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UploadModalComponent_div_9_div_7_span_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 43);\n    i0.ɵɵtext(1, \"\\u2705\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UploadModalComponent_div_9_div_7_span_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 44);\n    i0.ɵɵtext(1, \"\\u274C\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UploadModalComponent_div_9_div_7_button_23_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 45);\n    i0.ɵɵlistener(\"click\", function UploadModalComponent_div_9_div_7_button_23_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const file_r4 = i0.ɵɵnextContext().$implicit;\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.removeFile(file_r4.id));\n    });\n    i0.ɵɵtext(1, \" \\u00D7 \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UploadModalComponent_div_9_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23)(1, \"div\", 24)(2, \"span\", 25);\n    i0.ɵɵtemplate(3, UploadModalComponent_div_9_div_7_span_3_Template, 2, 0, \"span\", 26)(4, UploadModalComponent_div_9_div_7_span_4_Template, 2, 0, \"span\", 26)(5, UploadModalComponent_div_9_div_7_span_5_Template, 2, 0, \"span\", 26)(6, UploadModalComponent_div_9_div_7_span_6_Template, 2, 0, \"span\", 26)(7, UploadModalComponent_div_9_div_7_span_7_Template, 2, 0, \"span\", 26)(8, UploadModalComponent_div_9_div_7_span_8_Template, 2, 0, \"span\", 26)(9, UploadModalComponent_div_9_div_7_span_9_Template, 2, 0, \"span\", 26)(10, UploadModalComponent_div_9_div_7_span_10_Template, 2, 0, \"span\", 27);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"div\", 28)(12, \"div\", 29);\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"div\", 30);\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(16, UploadModalComponent_div_9_div_7_div_16_Template, 2, 2, \"div\", 31);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"div\", 32)(18, \"span\", 33);\n    i0.ɵɵtemplate(19, UploadModalComponent_div_9_div_7_span_19_Template, 2, 0, \"span\", 34)(20, UploadModalComponent_div_9_div_7_span_20_Template, 2, 0, \"span\", 35)(21, UploadModalComponent_div_9_div_7_span_21_Template, 2, 0, \"span\", 36)(22, UploadModalComponent_div_9_div_7_span_22_Template, 2, 0, \"span\", 37);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(23, UploadModalComponent_div_9_div_7_button_23_Template, 2, 0, \"button\", 38);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const file_r4 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngSwitch\", file_r4.type);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngSwitchCase\", \"pdf\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngSwitchCase\", \"doc\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngSwitchCase\", \"docx\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngSwitchCase\", \"txt\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngSwitchCase\", \"jpg\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngSwitchCase\", \"jpeg\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngSwitchCase\", \"png\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(file_r4.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(file_r4.size);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", file_r4.status === \"uploading\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngSwitch\", file_r4.status);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngSwitchCase\", \"pending\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngSwitchCase\", \"uploading\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngSwitchCase\", \"completed\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngSwitchCase\", \"error\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", file_r4.status !== \"uploading\");\n  }\n}\nfunction UploadModalComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 17)(1, \"div\", 18)(2, \"h3\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function UploadModalComponent_div_9_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.clearFiles());\n    });\n    i0.ɵɵtext(5, \"Clear All\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 20);\n    i0.ɵɵtemplate(7, UploadModalComponent_div_9_div_7_Template, 24, 17, \"div\", 21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"button\", 22);\n    i0.ɵɵlistener(\"click\", function UploadModalComponent_div_9_Template_button_click_8_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.openFileDialog());\n    });\n    i0.ɵɵtext(9, \" + Add more files \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Selected Files (\", ctx_r1.uploadFiles().length, \")\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.uploadFiles())(\"ngForTrackBy\", ctx_r1.trackByFileId);\n  }\n}\nfunction UploadModalComponent_div_10_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 50);\n    i0.ɵɵlistener(\"click\", function UploadModalComponent_div_10_div_6_Template_div_click_0_listener() {\n      const workflow_r7 = i0.ɵɵrestoreView(_r6).$implicit;\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.selectWorkflow(workflow_r7.id));\n    });\n    i0.ɵɵelementStart(1, \"div\", 51);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 52)(4, \"h4\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const workflow_r7 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassProp(\"selected\", ctx_r1.selectedWorkflow() === workflow_r7.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(workflow_r7.icon);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(workflow_r7.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(workflow_r7.description);\n  }\n}\nfunction UploadModalComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 46)(1, \"h3\");\n    i0.ɵɵtext(2, \"Apply Workflow (Optional)\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\", 47);\n    i0.ɵɵtext(4, \"Choose a workflow to automatically process your documents\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 48);\n    i0.ɵɵtemplate(6, UploadModalComponent_div_10_div_6_Template, 8, 5, \"div\", 49);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.workflowOptions());\n  }\n}\nfunction UploadModalComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 53)(1, \"div\", 54)(2, \"input\", 55);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function UploadModalComponent_div_11_Template_input_ngModelChange_2_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.extractText, $event) || (ctx_r1.extractText = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"label\", 56);\n    i0.ɵɵtext(4, \"Extract text automatically (OCR)\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"div\", 54)(6, \"input\", 57);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function UploadModalComponent_div_11_Template_input_ngModelChange_6_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r1 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r1.enableSearch, $event) || (ctx_r1.enableSearch = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"label\", 58);\n    i0.ɵɵtext(8, \"Enable semantic search\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.extractText);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r1.enableSearch);\n  }\n}\nfunction UploadModalComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 59)(1, \"button\", 60);\n    i0.ɵɵlistener(\"click\", function UploadModalComponent_div_12_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.onClose());\n    });\n    i0.ɵɵtext(2, \"Cancel\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 61);\n    i0.ɵɵlistener(\"click\", function UploadModalComponent_div_12_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.startUpload());\n    });\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"disabled\", ctx_r1.isUploading() || ctx_r1.allFilesCompleted());\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.isUploading() ? \"Uploading...\" : \"Upload Files\", \" \");\n  }\n}\nexport let UploadModalComponent = /*#__PURE__*/(() => {\n  class UploadModalComponent {\n    constructor() {\n      this.isVisible = false;\n      this.close = new EventEmitter();\n      this.filesUploaded = new EventEmitter();\n      this.files = signal([]);\n      this.dragOver = signal(false);\n      this.uploading = signal(false);\n      this.selectedWorkflowId = signal(null);\n      this.uploadFiles = this.files.asReadonly();\n      this.isDragOver = this.dragOver.asReadonly();\n      this.isUploading = this.uploading.asReadonly();\n      this.selectedWorkflow = this.selectedWorkflowId.asReadonly();\n      this.extractText = true;\n      this.enableSearch = true;\n      this.workflowOptions = signal([{\n        id: 'ocr',\n        name: 'OCR Processing',\n        description: 'Extract text from images and scanned documents',\n        icon: '🔤'\n      }, {\n        id: 'invoice',\n        name: 'Invoice Processing',\n        description: 'Extract data from invoices automatically',\n        icon: '🧾'\n      }, {\n        id: 'contract',\n        name: 'Contract Analysis',\n        description: 'Analyze contracts for key terms and compliance',\n        icon: '📋'\n      }, {\n        id: 'classification',\n        name: 'Document Classification',\n        description: 'Automatically categorize documents by type',\n        icon: '🏷️'\n      }]);\n    }\n    onOverlayClick(event) {\n      if (event.target === event.currentTarget) {\n        this.onClose();\n      }\n    }\n    onClose() {\n      this.close.emit();\n      this.resetModal();\n    }\n    onDragOver(event) {\n      event.preventDefault();\n      this.dragOver.set(true);\n    }\n    onDragLeave(event) {\n      event.preventDefault();\n      this.dragOver.set(false);\n    }\n    onDrop(event) {\n      event.preventDefault();\n      this.dragOver.set(false);\n      const files = Array.from(event.dataTransfer?.files || []);\n      this.addFiles(files);\n    }\n    onFileSelected(event) {\n      const input = event.target;\n      if (input.files) {\n        const files = Array.from(input.files);\n        this.addFiles(files);\n      }\n    }\n    addFiles(files) {\n      const newFiles = files.map(file => this.createUploadFile(file));\n      this.files.update(current => [...current, ...newFiles]);\n    }\n    createUploadFile(file) {\n      return {\n        file,\n        id: Math.random().toString(36).substr(2, 9),\n        name: file.name,\n        size: this.formatFileSize(file.size),\n        type: this.getFileType(file.name),\n        progress: 0,\n        status: 'pending'\n      };\n    }\n    getFileType(fileName) {\n      const extension = fileName.split('.').pop()?.toLowerCase() || '';\n      return extension;\n    }\n    formatFileSize(bytes) {\n      if (bytes === 0) return '0 Bytes';\n      const k = 1024;\n      const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n      const i = Math.floor(Math.log(bytes) / Math.log(k));\n      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n    }\n    removeFile(fileId) {\n      this.files.update(current => current.filter(f => f.id !== fileId));\n    }\n    clearFiles() {\n      this.files.set([]);\n    }\n    selectWorkflow(workflowId) {\n      this.selectedWorkflowId.set(this.selectedWorkflowId() === workflowId ? null : workflowId);\n    }\n    trackByFileId(index, file) {\n      return file.id;\n    }\n    allFilesCompleted() {\n      const files = this.uploadFiles();\n      return files.length > 0 && files.every(f => f.status === 'completed');\n    }\n    openFileDialog() {\n      this.fileInput.nativeElement.click();\n    }\n    startUpload() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        _this.uploading.set(true);\n        const pendingFiles = _this.files().filter(f => f.status === 'pending');\n        for (const file of pendingFiles) {\n          yield _this.uploadFile(file);\n        }\n        _this.uploading.set(false);\n        _this.filesUploaded.emit(_this.files());\n        // Close modal after successful upload\n        setTimeout(() => {\n          _this.onClose();\n        }, 1000);\n      })();\n    }\n    uploadFile(uploadFile) {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        // Update file status to uploading\n        _this2.files.update(current => current.map(f => f.id === uploadFile.id ? {\n          ...f,\n          status: 'uploading'\n        } : f));\n        // Simulate upload progress\n        for (let progress = 0; progress <= 100; progress += 10) {\n          yield _this2.delay(100);\n          _this2.files.update(current => current.map(f => f.id === uploadFile.id ? {\n            ...f,\n            progress\n          } : f));\n        }\n        // Mark as completed\n        _this2.files.update(current => current.map(f => f.id === uploadFile.id ? {\n          ...f,\n          status: 'completed',\n          progress: 100\n        } : f));\n      })();\n    }\n    delay(ms) {\n      return new Promise(resolve => setTimeout(resolve, ms));\n    }\n    resetModal() {\n      this.files.set([]);\n      this.dragOver.set(false);\n      this.uploading.set(false);\n      this.selectedWorkflowId.set(null);\n      this.extractText = true;\n      this.enableSearch = true;\n    }\n    static {\n      this.ɵfac = function UploadModalComponent_Factory(t) {\n        return new (t || UploadModalComponent)();\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: UploadModalComponent,\n        selectors: [[\"app-upload-modal\"]],\n        viewQuery: function UploadModalComponent_Query(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵviewQuery(_c0, 5);\n          }\n          if (rf & 2) {\n            let _t;\n            i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.fileInput = _t.first);\n          }\n        },\n        inputs: {\n          isVisible: \"isVisible\"\n        },\n        outputs: {\n          close: \"close\",\n          filesUploaded: \"filesUploaded\"\n        },\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 13,\n        vars: 7,\n        consts: [[\"fileInput\", \"\"], [1, \"modal-overlay\", 3, \"click\"], [1, \"modal-content\", 3, \"click\"], [1, \"modal-header\"], [1, \"close-btn\", 3, \"click\"], [1, \"modal-body\"], [\"class\", \"upload-section\", 4, \"ngIf\"], [\"class\", \"files-section\", 4, \"ngIf\"], [\"class\", \"workflow-section\", 4, \"ngIf\"], [\"class\", \"options-section\", 4, \"ngIf\"], [\"class\", \"modal-actions\", 4, \"ngIf\"], [1, \"upload-section\"], [1, \"upload-zone\", 3, \"dragover\", \"dragleave\", \"drop\", \"click\"], [1, \"upload-icon\"], [1, \"supported-formats\"], [1, \"format\"], [\"type\", \"file\", \"multiple\", \"\", \"accept\", \".pdf,.doc,.docx,.txt,.jpg,.jpeg,.png\", 2, \"display\", \"none\", 3, \"change\"], [1, \"files-section\"], [1, \"files-header\"], [1, \"btn\", \"btn-secondary\", \"btn-sm\", 3, \"click\"], [1, \"files-list\"], [\"class\", \"file-item\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [1, \"btn\", \"btn-link\", \"add-more\", 3, \"click\"], [1, \"file-item\"], [1, \"file-icon\"], [3, \"ngSwitch\"], [4, \"ngSwitchCase\"], [4, \"ngSwitchDefault\"], [1, \"file-info\"], [1, \"file-name\"], [1, \"file-size\"], [\"class\", \"progress-bar\", 4, \"ngIf\"], [1, \"file-status\"], [1, \"status-icon\", 3, \"ngSwitch\"], [\"class\", \"pending\", 4, \"ngSwitchCase\"], [\"class\", \"uploading\", 4, \"ngSwitchCase\"], [\"class\", \"completed\", 4, \"ngSwitchCase\"], [\"class\", \"error\", 4, \"ngSwitchCase\"], [\"class\", \"remove-btn\", 3, \"click\", 4, \"ngIf\"], [1, \"progress-bar\"], [1, \"progress-fill\"], [1, \"pending\"], [1, \"uploading\"], [1, \"completed\"], [1, \"error\"], [1, \"remove-btn\", 3, \"click\"], [1, \"workflow-section\"], [1, \"section-description\"], [1, \"workflow-options\"], [\"class\", \"workflow-option\", 3, \"selected\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"workflow-option\", 3, \"click\"], [1, \"workflow-icon\"], [1, \"workflow-info\"], [1, \"options-section\"], [1, \"option\"], [\"type\", \"checkbox\", \"id\", \"extractText\", 3, \"ngModelChange\", \"ngModel\"], [\"for\", \"extractText\"], [\"type\", \"checkbox\", \"id\", \"enableSearch\", 3, \"ngModelChange\", \"ngModel\"], [\"for\", \"enableSearch\"], [1, \"modal-actions\"], [1, \"btn\", \"btn-secondary\", 3, \"click\"], [1, \"btn\", \"btn-primary\", 3, \"click\", \"disabled\"]],\n        template: function UploadModalComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 1);\n            i0.ɵɵlistener(\"click\", function UploadModalComponent_Template_div_click_0_listener($event) {\n              return ctx.onOverlayClick($event);\n            });\n            i0.ɵɵelementStart(1, \"div\", 2);\n            i0.ɵɵlistener(\"click\", function UploadModalComponent_Template_div_click_1_listener($event) {\n              return $event.stopPropagation();\n            });\n            i0.ɵɵelementStart(2, \"div\", 3)(3, \"h2\");\n            i0.ɵɵtext(4, \"Upload Documents\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(5, \"button\", 4);\n            i0.ɵɵlistener(\"click\", function UploadModalComponent_Template_button_click_5_listener() {\n              return ctx.onClose();\n            });\n            i0.ɵɵtext(6, \"\\u00D7\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(7, \"div\", 5);\n            i0.ɵɵtemplate(8, UploadModalComponent_div_8_Template, 23, 2, \"div\", 6)(9, UploadModalComponent_div_9_Template, 10, 3, \"div\", 7)(10, UploadModalComponent_div_10_Template, 7, 1, \"div\", 8)(11, UploadModalComponent_div_11_Template, 9, 2, \"div\", 9)(12, UploadModalComponent_div_12_Template, 5, 2, \"div\", 10);\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵclassProp(\"visible\", ctx.isVisible);\n            i0.ɵɵadvance(8);\n            i0.ɵɵproperty(\"ngIf\", ctx.uploadFiles().length === 0);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.uploadFiles().length > 0);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.uploadFiles().length > 0);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.uploadFiles().length > 0);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.uploadFiles().length > 0);\n          }\n        },\n        dependencies: [CommonModule, i1.NgForOf, i1.NgIf, i1.NgSwitch, i1.NgSwitchCase, i1.NgSwitchDefault, FormsModule, i2.CheckboxControlValueAccessor, i2.NgControlStatus, i2.NgModel],\n        styles: [\".modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;opacity:0;visibility:hidden;transition:all .3s ease}.modal-overlay.visible[_ngcontent-%COMP%]{opacity:1;visibility:visible}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:100%;max-width:600px;max-height:90vh;overflow-y:auto;box-shadow:0 20px 40px #0000001a;transform:translateY(-50px);transition:transform .3s ease}.modal-overlay.visible[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{transform:translateY(0)}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem 2rem;border-bottom:1px solid #e5e7eb}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:600;color:#111827}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;color:#6b7280;cursor:pointer;padding:.25rem;border-radius:50%;width:2rem;height:2rem;display:flex;align-items:center;justify-content:center;transition:all .2s}.close-btn[_ngcontent-%COMP%]:hover{background:#f3f4f6;color:#374151}.modal-body[_ngcontent-%COMP%]{padding:2rem}.upload-zone[_ngcontent-%COMP%]{border:2px dashed #d1d5db;border-radius:12px;padding:3rem 2rem;text-align:center;cursor:pointer;transition:all .2s;background:#f9fafb}.upload-zone[_ngcontent-%COMP%]:hover, .upload-zone.drag-over[_ngcontent-%COMP%]{border-color:#667eea;background:#f0f4ff}.upload-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem;opacity:.6}.upload-zone[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;color:#374151;font-weight:500}.upload-zone[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 1rem;color:#6b7280}.supported-formats[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:.5rem;flex-wrap:wrap}.format[_ngcontent-%COMP%]{background:#e5e7eb;color:#6b7280;padding:.25rem .5rem;border-radius:4px;font-size:.75rem;font-weight:500}.files-section[_ngcontent-%COMP%]{margin-top:1.5rem}.files-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.files-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#374151;font-weight:500}.files-list[_ngcontent-%COMP%]{display:grid;gap:.75rem;margin-bottom:1rem}.file-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem;border:1px solid #e5e7eb;border-radius:8px;background:#f9fafb}.file-icon[_ngcontent-%COMP%]{font-size:1.5rem;width:2.5rem;height:2.5rem;display:flex;align-items:center;justify-content:center;background:#fff;border-radius:6px}.file-info[_ngcontent-%COMP%]{flex:1}.file-name[_ngcontent-%COMP%]{font-weight:500;color:#374151;margin-bottom:.25rem;font-size:.875rem}.file-size[_ngcontent-%COMP%]{color:#6b7280;font-size:.75rem}.progress-bar[_ngcontent-%COMP%]{width:100%;height:4px;background:#e5e7eb;border-radius:2px;margin-top:.5rem;overflow:hidden}.progress-fill[_ngcontent-%COMP%]{height:100%;background:#667eea;transition:width .3s ease}.file-status[_ngcontent-%COMP%]{display:flex;align-items:center}.status-icon.pending[_ngcontent-%COMP%]{color:#f59e0b}.status-icon.uploading[_ngcontent-%COMP%]{color:#667eea}.status-icon.completed[_ngcontent-%COMP%]{color:#10b981}.status-icon.error[_ngcontent-%COMP%]{color:#ef4444}.remove-btn[_ngcontent-%COMP%]{background:none;border:none;color:#9ca3af;cursor:pointer;font-size:1.25rem;padding:.25rem;border-radius:50%;width:1.5rem;height:1.5rem;display:flex;align-items:center;justify-content:center;transition:all .2s}.remove-btn[_ngcontent-%COMP%]:hover{color:#ef4444;background:#fee2e2}.workflow-section[_ngcontent-%COMP%]{margin-top:2rem;padding-top:1.5rem;border-top:1px solid #e5e7eb}.workflow-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;color:#374151;font-weight:500}.section-description[_ngcontent-%COMP%]{margin:0 0 1rem;color:#6b7280;font-size:.875rem}.workflow-options[_ngcontent-%COMP%]{display:grid;gap:.75rem}.workflow-option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem;border:2px solid #e5e7eb;border-radius:8px;cursor:pointer;transition:all .2s}.workflow-option[_ngcontent-%COMP%]:hover{border-color:#d1d5db}.workflow-option.selected[_ngcontent-%COMP%]{border-color:#667eea;background:#f0f4ff}.workflow-icon[_ngcontent-%COMP%]{font-size:1.5rem;width:2.5rem;height:2.5rem;display:flex;align-items:center;justify-content:center;background:#fff;border-radius:6px}.workflow-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .25rem;color:#374151;font-weight:500;font-size:.875rem}.workflow-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#6b7280;font-size:.75rem}.options-section[_ngcontent-%COMP%]{margin-top:1.5rem;padding-top:1.5rem;border-top:1px solid #e5e7eb}.option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:.75rem}.option[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:1rem;height:1rem;accent-color:#667eea}.option[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#374151;font-size:.875rem;cursor:pointer}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;margin-top:2rem;padding-top:1.5rem;border-top:1px solid #e5e7eb}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:8px;font-weight:500;cursor:pointer;transition:all .2s;font-size:.875rem}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{background:#667eea;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#5a67d8}.btn-secondary[_ngcontent-%COMP%]{background:#fff;color:#374151;border:1px solid #d1d5db}.btn-secondary[_ngcontent-%COMP%]:hover{background:#f9fafb}.btn-sm[_ngcontent-%COMP%]{padding:.5rem 1rem;font-size:.75rem}.btn-link[_ngcontent-%COMP%]{background:none;color:#667eea;border:none;padding:.5rem;font-size:.875rem}.btn-link[_ngcontent-%COMP%]:hover{color:#5a67d8;text-decoration:underline}.add-more[_ngcontent-%COMP%]{display:block;margin:0 auto}\"]\n      });\n    }\n  }\n  return UploadModalComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}