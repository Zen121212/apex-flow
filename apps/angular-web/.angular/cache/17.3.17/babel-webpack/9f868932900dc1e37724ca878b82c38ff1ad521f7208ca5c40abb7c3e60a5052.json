{"ast":null,"code":"import _asyncToGenerator from \"/Users/Zen/Desktop/ApexFlow/apps/angular-web/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { EventEmitter, signal } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/auth.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction AuthModalComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 15)(1, \"label\", 24);\n    i0.ɵɵtext(2, \"Full Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"input\", 25);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function AuthModalComponent_div_20_Template_input_ngModelChange_3_listener($event) {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r2 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r2.formData.name, $event) || (ctx_r2.formData.name = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r2.formData.name);\n  }\n}\nfunction AuthModalComponent_div_29_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 15)(1, \"label\", 26);\n    i0.ɵɵtext(2, \"Confirm Password\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"input\", 27);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function AuthModalComponent_div_29_Template_input_ngModelChange_3_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r2 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r2.formData.confirmPassword, $event) || (ctx_r2.formData.confirmPassword = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r2.formData.confirmPassword);\n  }\n}\nfunction AuthModalComponent_div_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 28);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.errorMessage(), \" \");\n  }\n}\nexport let AuthModalComponent = /*#__PURE__*/(() => {\n  class AuthModalComponent {\n    constructor(authService) {\n      this.authService = authService;\n      this.isVisible = false;\n      this.close = new EventEmitter();\n      this.authenticated = new EventEmitter();\n      this.signUpMode = signal(false);\n      this.loading = signal(false);\n      this.error = signal('');\n      this.formData = {\n        name: '',\n        email: '',\n        password: '',\n        confirmPassword: ''\n      };\n      this.isSignUp = this.signUpMode.asReadonly();\n      this.isLoading = this.loading.asReadonly();\n      this.errorMessage = this.error.asReadonly();\n    }\n    onOverlayClick(event) {\n      if (event.target === event.currentTarget) {\n        this.onClose();\n      }\n    }\n    onClose() {\n      this.close.emit();\n      this.resetForm();\n    }\n    toggleMode() {\n      this.signUpMode.update(mode => !mode);\n      this.error.set('');\n    }\n    onGoogleSignIn() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        _this.loading.set(true);\n        _this.error.set('');\n        try {\n          const success = yield _this.authService.signInWithGoogle();\n          if (success) {\n            _this.authenticated.emit();\n            _this.onClose();\n          } else {\n            _this.error.set('Google sign in failed. Please try again.');\n          }\n        } catch (error) {\n          _this.error.set('Google sign in failed. Please try again.');\n        } finally {\n          _this.loading.set(false);\n        }\n      })();\n    }\n    onSubmit() {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        if (_this2.isSignUp() && _this2.formData.password !== _this2.formData.confirmPassword) {\n          _this2.error.set('Passwords do not match.');\n          return;\n        }\n        _this2.loading.set(true);\n        _this2.error.set('');\n        try {\n          let success = false;\n          if (_this2.isSignUp()) {\n            success = yield _this2.authService.signUpWithEmail(_this2.formData.email, _this2.formData.password, _this2.formData.name);\n          } else {\n            success = yield _this2.authService.signInWithEmail(_this2.formData.email, _this2.formData.password);\n          }\n          if (success) {\n            _this2.authenticated.emit();\n            _this2.onClose();\n          } else {\n            _this2.error.set(_this2.isSignUp() ? 'Account creation failed. Please try again.' : 'Invalid email or password.');\n          }\n        } catch (error) {\n          _this2.error.set('An error occurred. Please try again.');\n        } finally {\n          _this2.loading.set(false);\n        }\n      })();\n    }\n    resetForm() {\n      this.formData = {\n        name: '',\n        email: '',\n        password: '',\n        confirmPassword: ''\n      };\n      this.error.set('');\n      this.loading.set(false);\n      this.signUpMode.set(false);\n    }\n    static {\n      this.ɵfac = function AuthModalComponent_Factory(t) {\n        return new (t || AuthModalComponent)(i0.ɵɵdirectiveInject(i1.AuthService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: AuthModalComponent,\n        selectors: [[\"app-auth-modal\"]],\n        inputs: {\n          isVisible: \"isVisible\"\n        },\n        outputs: {\n          close: \"close\",\n          authenticated: \"authenticated\"\n        },\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 38,\n        vars: 14,\n        consts: [[\"authForm\", \"ngForm\"], [1, \"modal-overlay\", 3, \"click\"], [1, \"modal-content\", 3, \"click\"], [1, \"modal-header\"], [1, \"close-btn\", 3, \"click\"], [1, \"modal-body\"], [1, \"btn\", \"btn-google\", 3, \"click\", \"disabled\"], [\"width\", \"20\", \"height\", \"20\", \"viewBox\", \"0 0 24 24\"], [\"fill\", \"#4285f4\", \"d\", \"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"], [\"fill\", \"#34a853\", \"d\", \"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"], [\"fill\", \"#fbbc05\", \"d\", \"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"], [\"fill\", \"#ea4335\", \"d\", \"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"], [1, \"divider\"], [3, \"ngSubmit\"], [\"class\", \"form-group\", 4, \"ngIf\"], [1, \"form-group\"], [\"for\", \"email\"], [\"type\", \"email\", \"id\", \"email\", \"name\", \"email\", \"required\", \"\", \"placeholder\", \"Enter your email\", 3, \"ngModelChange\", \"ngModel\"], [\"for\", \"password\"], [\"type\", \"password\", \"id\", \"password\", \"name\", \"password\", \"required\", \"\", \"placeholder\", \"Enter your password\", \"minlength\", \"6\", 3, \"ngModelChange\", \"ngModel\"], [\"class\", \"error-message\", 4, \"ngIf\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"btn-full\", 3, \"disabled\"], [1, \"switch-mode\"], [\"type\", \"button\", 1, \"link-btn\", 3, \"click\"], [\"for\", \"name\"], [\"type\", \"text\", \"id\", \"name\", \"name\", \"name\", \"required\", \"\", \"placeholder\", \"Enter your full name\", 3, \"ngModelChange\", \"ngModel\"], [\"for\", \"confirmPassword\"], [\"type\", \"password\", \"id\", \"confirmPassword\", \"name\", \"confirmPassword\", \"required\", \"\", \"placeholder\", \"Confirm your password\", \"minlength\", \"6\", 3, \"ngModelChange\", \"ngModel\"], [1, \"error-message\"]],\n        template: function AuthModalComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            const _r1 = i0.ɵɵgetCurrentView();\n            i0.ɵɵelementStart(0, \"div\", 1);\n            i0.ɵɵlistener(\"click\", function AuthModalComponent_Template_div_click_0_listener($event) {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.onOverlayClick($event));\n            });\n            i0.ɵɵelementStart(1, \"div\", 2);\n            i0.ɵɵlistener(\"click\", function AuthModalComponent_Template_div_click_1_listener($event) {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView($event.stopPropagation());\n            });\n            i0.ɵɵelementStart(2, \"div\", 3)(3, \"h2\");\n            i0.ɵɵtext(4);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(5, \"button\", 4);\n            i0.ɵɵlistener(\"click\", function AuthModalComponent_Template_button_click_5_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.onClose());\n            });\n            i0.ɵɵtext(6, \"\\u00D7\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(7, \"div\", 5)(8, \"button\", 6);\n            i0.ɵɵlistener(\"click\", function AuthModalComponent_Template_button_click_8_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.onGoogleSignIn());\n            });\n            i0.ɵɵnamespaceSVG();\n            i0.ɵɵelementStart(9, \"svg\", 7);\n            i0.ɵɵelement(10, \"path\", 8)(11, \"path\", 9)(12, \"path\", 10)(13, \"path\", 11);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(14);\n            i0.ɵɵelementEnd();\n            i0.ɵɵnamespaceHTML();\n            i0.ɵɵelementStart(15, \"div\", 12)(16, \"span\");\n            i0.ɵɵtext(17, \"or\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(18, \"form\", 13, 0);\n            i0.ɵɵlistener(\"ngSubmit\", function AuthModalComponent_Template_form_ngSubmit_18_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.onSubmit());\n            });\n            i0.ɵɵtemplate(20, AuthModalComponent_div_20_Template, 4, 1, \"div\", 14);\n            i0.ɵɵelementStart(21, \"div\", 15)(22, \"label\", 16);\n            i0.ɵɵtext(23, \"Email\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(24, \"input\", 17);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function AuthModalComponent_Template_input_ngModelChange_24_listener($event) {\n              i0.ɵɵrestoreView(_r1);\n              i0.ɵɵtwoWayBindingSet(ctx.formData.email, $event) || (ctx.formData.email = $event);\n              return i0.ɵɵresetView($event);\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(25, \"div\", 15)(26, \"label\", 18);\n            i0.ɵɵtext(27, \"Password\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(28, \"input\", 19);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function AuthModalComponent_Template_input_ngModelChange_28_listener($event) {\n              i0.ɵɵrestoreView(_r1);\n              i0.ɵɵtwoWayBindingSet(ctx.formData.password, $event) || (ctx.formData.password = $event);\n              return i0.ɵɵresetView($event);\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(29, AuthModalComponent_div_29_Template, 4, 1, \"div\", 14)(30, AuthModalComponent_div_30_Template, 2, 1, \"div\", 20);\n            i0.ɵɵelementStart(31, \"button\", 21);\n            i0.ɵɵtext(32);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(33, \"div\", 22)(34, \"span\");\n            i0.ɵɵtext(35);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(36, \"button\", 23);\n            i0.ɵɵlistener(\"click\", function AuthModalComponent_Template_button_click_36_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.toggleMode());\n            });\n            i0.ɵɵtext(37);\n            i0.ɵɵelementEnd()()()()();\n          }\n          if (rf & 2) {\n            const authForm_r5 = i0.ɵɵreference(19);\n            i0.ɵɵclassProp(\"visible\", ctx.isVisible);\n            i0.ɵɵadvance(4);\n            i0.ɵɵtextInterpolate(ctx.isSignUp() ? \"Create Account\" : \"Welcome Back\");\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"disabled\", ctx.isLoading());\n            i0.ɵɵadvance(6);\n            i0.ɵɵtextInterpolate1(\" \", ctx.isLoading() ? \"Please wait...\" : \"Continue with Google\", \" \");\n            i0.ɵɵadvance(6);\n            i0.ɵɵproperty(\"ngIf\", ctx.isSignUp());\n            i0.ɵɵadvance(4);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.formData.email);\n            i0.ɵɵadvance(4);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.formData.password);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.isSignUp());\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.errorMessage());\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"disabled\", ctx.isLoading() || !authForm_r5.form.valid);\n            i0.ɵɵadvance();\n            i0.ɵɵtextInterpolate1(\" \", ctx.isLoading() ? \"Please wait...\" : ctx.isSignUp() ? \"Create Account\" : \"Sign In\", \" \");\n            i0.ɵɵadvance(3);\n            i0.ɵɵtextInterpolate(ctx.isSignUp() ? \"Already have an account?\" : \"Don't have an account?\");\n            i0.ɵɵadvance(2);\n            i0.ɵɵtextInterpolate1(\" \", ctx.isSignUp() ? \"Sign In\" : \"Sign Up\", \" \");\n          }\n        },\n        dependencies: [CommonModule, i2.NgIf, FormsModule, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.RequiredValidator, i3.MinLengthValidator, i3.NgModel, i3.NgForm],\n        styles: [\".modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;opacity:0;visibility:hidden;transition:all .3s ease}.modal-overlay.visible[_ngcontent-%COMP%]{opacity:1;visibility:visible}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:100%;max-width:400px;max-height:90vh;overflow-y:auto;box-shadow:0 20px 40px #0000001a;transform:translateY(-50px);transition:transform .3s ease}.modal-overlay.visible[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{transform:translateY(0)}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem 2rem 1rem;border-bottom:1px solid #e5e7eb}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:600;color:#111827}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;color:#6b7280;cursor:pointer;padding:.25rem;border-radius:50%;width:2rem;height:2rem;display:flex;align-items:center;justify-content:center;transition:all .2s}.close-btn[_ngcontent-%COMP%]:hover{background:#f3f4f6;color:#374151}.modal-body[_ngcontent-%COMP%]{padding:2rem}.btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;padding:.75rem 1rem;border:none;border-radius:8px;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s;text-decoration:none}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-google[_ngcontent-%COMP%]{width:100%;background:#fff;border:1px solid #d1d5db;color:#374151;margin-bottom:1.5rem}.btn-google[_ngcontent-%COMP%]:hover:not(:disabled){background:#f9fafb;border-color:#9ca3af}.btn-primary[_ngcontent-%COMP%]{background:#667eea;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#5a67d8}.btn-full[_ngcontent-%COMP%]{width:100%}.divider[_ngcontent-%COMP%]{display:flex;align-items:center;margin:1.5rem 0;color:#6b7280;font-size:.875rem}.divider[_ngcontent-%COMP%]:before, .divider[_ngcontent-%COMP%]:after{content:\\\"\\\";flex:1;height:1px;background:#e5e7eb}.divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 1rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-size:.875rem;font-weight:500;color:#374151}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #d1d5db;border-radius:6px;font-size:.875rem;transition:border-color .2s;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.error-message[_ngcontent-%COMP%]{color:#dc2626;font-size:.875rem;margin-bottom:1rem;padding:.5rem;background:#fef2f2;border:1px solid #fecaca;border-radius:6px}.switch-mode[_ngcontent-%COMP%]{text-align:center;margin-top:1.5rem;font-size:.875rem;color:#6b7280}.link-btn[_ngcontent-%COMP%]{background:none;border:none;color:#667eea;font-weight:500;cursor:pointer;margin-left:.25rem;text-decoration:underline}.link-btn[_ngcontent-%COMP%]:hover{color:#5a67d8}\"]\n      });\n    }\n  }\n  return AuthModalComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}